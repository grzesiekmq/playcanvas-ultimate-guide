Chapter 25: Lighting

Lighting in PlayCanvas is essential for setting mood, realism, and guiding the player’s attention. The engine supports a range of lighting techniques—from real-time dynamic lights to baked global illumination—providing flexibility for games, architectural visualization, and interactive product demos.


---

25.1 Types of Lights

PlayCanvas supports three main types of lights:

Directional Light
Simulates sunlight. Affects all objects uniformly. Great for outdoor scenes.

entity.addComponent('light', {
    type: 'directional',
    color: new pc.Color(1, 1, 1),
    intensity: 1,
    castShadows: true
});

Point Light
Emits light in all directions from a point. Useful for bulbs or torches.

Spot Light
Emits light in a cone. Ideal for flashlights, car headlights, or stage lighting.


Each light type supports color, intensity, range, shadows, and cookies (projected textures).


---

25.2 Shadow Mapping

Dynamic lights can cast real-time shadows. Enable it like this:

entity.light.castShadows = true;

Key properties:

shadowResolution: affects quality and performance.

shadowBias: helps eliminate shadow acne.

normalOffsetBias: improves accuracy on complex geometry.


Use directional light with cascaded shadow maps for better large-scale shadows.


---

25.3 Light Cookies

A cookie is a grayscale texture projected from a light, creating effects like caustics, window shadows, or flickering flames.

entity.light.cookie = app.assets.find('windowCookie').resource;

Cookies support 2D textures for spot/directional lights and cube maps for point lights.


---

25.4 Ambient Light and Skybox

Ambient light provides base illumination to the whole scene. It's added via:

Ambient Color: Uniform global light.

Skybox: Cubemap that lights the scene using Image-Based Lighting (IBL).


app.scene.skybox = app.assets.find('skybox').resource;
app.scene.skyboxIntensity = 1;

You can tweak the skybox rotation to align it with your environment.


---

25.5 Image-Based Lighting (IBL)

IBL uses a cubemap to provide realistic environmental lighting and reflections. Best results require:

Pre-filtered cubemaps (generated by PlayCanvas or externally).

PBR materials with metallic/roughness values.


It greatly enhances realism in PBR workflows and works best with HDR images.


---

25.6 Light Baking

To improve performance, static lighting can be baked into lightmaps:

1. Mark objects as static (.setStatic(true) or in Editor).


2. Set up lights as "bakeable".


3. Bake lighting in the Editor (Scene Settings > Bake Lightmaps).



This reduces GPU overhead by removing real-time lighting calculations for static geometry.


---

25.7 Performance Tips

Minimize the number of shadow-casting lights.

Prefer baked lights for static scenes.

Avoid overlapping multiple shadow lights.

Use lower shadow resolution when possible.

Use clustered lighting (enabled by default) for better performance with many lights.



---

25.8 Lighting for UI

Lights don’t affect screen space UI. For 3D UI elements:

Place UI under 3D hierarchy.

Use unlit materials or ambient lighting.



---

25.9 Common Pitfalls

Avoid too many real-time shadow casters.

Don’t forget to assign normal maps for better light interaction.

Re-check light ranges to avoid performance drop.



---

25.10 Debugging Light Issues

Use the Scene Hierarchy to isolate lights.

Toggle castShadows and inspect shadowDistance.

Use the "Debug View" in the PlayCanvas Editor to visualize light complexity and shadow coverage.



---

Next Chapter: Chapter 26 will explore Post-Processing, covering screen effects such as bloom, depth of field, color grading, and custom shader effects using pc.PostEffect.

